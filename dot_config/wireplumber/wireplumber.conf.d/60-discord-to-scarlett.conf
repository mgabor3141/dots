# Route Discord audio directly to Scarlett (bypass virtual sink)
# This keeps Discord voice chat private (not streamed to Sunshine)

wireplumber.settings = {
  linking.allow-moving = true
}

wireplumber.profiles = {
  main = {
    node.rules = [
      {
        matches = [
          { application.name = "WEBRTC VoiceEngine" }
          { application.name = "Discord" }
          { application.process.binary = "Discord" }
          { application.name = "Vesktop" }
          { application.process.binary = "vesktop" }
          { application.process.binary = "vesktop" application.name = "Chromium" }
          { node.name = "~.*[Dd]iscord.*" }
        ]
        actions = {
          update-props = {
            node.target = "discord-audio"
          }
        }
      }
    ]
  }
}
