# Loopback Sunshine audio to physical speakers
# This allows you to hear streamed audio locally while Moonlight clients also receive it
#
# sink-sunshine-stereo.monitor â†’ Scarlett 8i6 (physical output)

context.modules = [
    {
        name = libpipewire-module-loopback
        args = {
            node.name = "Sunshine-Loopback"
            node.description = "Sunshine Audio Loopback to Speakers"
            capture.props = {
                media.class = Audio/Source
                node.target = "sink-sunshine-stereo"
            }
            playback.props = {
                media.class = Audio/Sink
                audio.position = [ FL FR ]
                stream.dont-remix = true
                node.passive = true
                node.target = "alsa_output.usb-Focusrite_Scarlett_8i6_USB_F8D9XVT150B68B-00.pro-output-0"
            }
        }
    }
]
