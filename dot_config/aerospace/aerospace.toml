accordion-padding = 32
after-login-command = []
default-root-container-layout = "accordion"
default-root-container-orientation = "horizontal"
enable-normalization-flatten-containers = true
enable-normalization-opposite-orientation-for-nested-containers = true
on-focused-monitor-changed = ["move-mouse monitor-lazy-center"]
start-at-login = true
automatically-unhide-macos-hidden-apps = true

exec-on-workspace-change = [
    '/bin/bash',
    '-c',
    'sketchybar --trigger aerospace_workspace_change FOCUSED_WORKSPACE=$AEROSPACE_FOCUSED_WORKSPACE PREV_WORKSPACE=$AEROSPACE_PREV_WORKSPACE; ~/.config/aerospace/pip-move.sh; ~/.config/wm-scripts/track-numbered-ws.sh "$AEROSPACE_FOCUSED_WORKSPACE"'
]

[exec.env-vars]
PATH = "/opt/homebrew/bin:/etc/profiles/per-user/mg/bin:${PATH}"

[gaps.inner]
horizontal = [
    { monitor."built-in" = 4 },
    8,
]
vertical = [
    { monitor."built-in" = 4 },
    8,
]

[gaps.outer]
bottom = [
    { monitor."built-in" = 0 },
    32,
]
left = [
    { monitor."built-in" = 0 },
    32,
]
right = [
    { monitor."built-in" = 0 },
    32,
]
top = [
    { monitor."built-in" = 0 },
    54,
]

[key-mapping]
preset = "qwerty"

[mode.main.binding]
# Workspace bindings
# NOTE: If adding/changing workspaces, also update ~/.config/aerospace/workspaces.conf
ctrl-a = "workspace 1A"
ctrl-q = "workspace 2Q"
ctrl-w = "workspace 3W"
ctrl-r = "exec-and-forget ~/.config/wm-scripts/last-numbered-ws.sh switch"
ctrl-t = "workspace 4T"
ctrl-1 = "workspace 51"
ctrl-2 = "workspace 62"
ctrl-3 = "workspace 73"
ctrl-4 = "workspace 84"
ctrl-5 = "workspace 95"

ctrl-shift-a = ["move-node-to-workspace --focus-follows-window 1A", "exec-and-forget sketchybar --trigger aerospace_node_moved"]
ctrl-shift-q = ["move-node-to-workspace --focus-follows-window 2Q", "exec-and-forget sketchybar --trigger aerospace_node_moved"]
ctrl-shift-w = ["move-node-to-workspace --focus-follows-window 3W", "exec-and-forget sketchybar --trigger aerospace_node_moved"]
ctrl-shift-r = "exec-and-forget ~/.config/wm-scripts/last-numbered-ws.sh move"
ctrl-shift-t = ["move-node-to-workspace --focus-follows-window 4T", "exec-and-forget sketchybar --trigger aerospace_node_moved"]
ctrl-shift-1 = ["move-node-to-workspace --focus-follows-window 51", "exec-and-forget ~/.config/wm-scripts/update-editor-mapping.sh 51", "exec-and-forget sketchybar --trigger aerospace_node_moved"]
ctrl-shift-2 = ["move-node-to-workspace --focus-follows-window 62", "exec-and-forget ~/.config/wm-scripts/update-editor-mapping.sh 62", "exec-and-forget sketchybar --trigger aerospace_node_moved"]
ctrl-shift-3 = ["move-node-to-workspace --focus-follows-window 73", "exec-and-forget ~/.config/wm-scripts/update-editor-mapping.sh 73", "exec-and-forget sketchybar --trigger aerospace_node_moved"]
ctrl-shift-4 = ["move-node-to-workspace --focus-follows-window 84", "exec-and-forget ~/.config/wm-scripts/update-editor-mapping.sh 84", "exec-and-forget sketchybar --trigger aerospace_node_moved"]
ctrl-shift-5 = ["move-node-to-workspace --focus-follows-window 95", "exec-and-forget ~/.config/wm-scripts/update-editor-mapping.sh 95", "exec-and-forget sketchybar --trigger aerospace_node_moved"]

ctrl-f20 = "workspace-back-and-forth"

ctrl-left  = "focus left"
ctrl-right = "focus right"
ctrl-up    = "exec-and-forget aerospace focus up --boundaries-action fail || aerospace list-workspaces --monitor focused --empty no | aerospace workspace prev --stdin"
ctrl-down  = "exec-and-forget aerospace focus down --boundaries-action fail || aerospace list-workspaces --monitor focused --empty no | aerospace workspace next --stdin"
ctrl-s     = "focus left"
ctrl-f     = "focus right"
ctrl-e     = "exec-and-forget aerospace focus up --boundaries-action fail || aerospace list-workspaces --monitor focused --empty no | aerospace workspace prev --stdin"
ctrl-d     = "exec-and-forget aerospace focus down --boundaries-action fail || aerospace list-workspaces --monitor focused --empty no | aerospace workspace next --stdin"

ctrl-shift-left  = "move left --boundaries-action stop"
ctrl-shift-right = "move right --boundaries-action stop"
ctrl-shift-up    = ["move-node-to-workspace --focus-follows-window prev", "exec-and-forget sketchybar --trigger aerospace_node_moved"]
ctrl-shift-down  = ["move-node-to-workspace --focus-follows-window next", "exec-and-forget sketchybar --trigger aerospace_node_moved"]
ctrl-shift-s     = "move left --boundaries-action stop"
ctrl-shift-f     = "move right --boundaries-action stop"
ctrl-shift-e     = ["move-node-to-workspace --focus-follows-window prev", "exec-and-forget sketchybar --trigger aerospace_node_moved"]
ctrl-shift-d     = ["move-node-to-workspace --focus-follows-window next", "exec-and-forget sketchybar --trigger aerospace_node_moved"]

ctrl-z = "layout floating tiling"
ctrl-b = "layout h_tiles h_accordion"
ctrl-c = "mode main" # no-op: swallow key so it doesn't pass through to app
ctrl-v = "mode main" # no-op: swallow key so it doesn't pass through to app

[[on-window-detected]]
if.app-id = "com.apple.finder"
run = "layout floating"

[[on-window-detected]]
if.window-title-regex-substring = "^(Picture[- ]in[- ]Picture|Meet - [a-z-]*)$"
run = "layout floating"

[[on-window-detected]]
if.app-id = "app.zen-browser.zen"
if.window-title-regex-substring = "Extension: "
check-further-callbacks = true
run = "layout floating"

[[on-window-detected]]
if.app-id = "app.zen-browser.zen"
run = "move-node-to-workspace 1A --focus-follows-window"

[[on-window-detected]]
if.app-id = "com.google.Chrome"
run = "move-node-to-workspace 2Q --focus-follows-window"

[[on-window-detected]]
if.app-id = "dev.zed.Zed"
if.window-title-regex-substring = "^Zed â€” Settings$"
check-further-callbacks = true
run = "layout floating"

[[on-window-detected]]
if.app-id = "dev.zed.Zed"
run = "exec-and-forget ~/.config/wm-scripts/assign-editor-workspace.sh"

[[on-window-detected]]
if.app-id = "com.microsoft.VSCode"
run = "move-node-to-workspace 62 --focus-follows-window"

[[on-window-detected]]
if.app-id = "com.jetbrains.WebStorm"
run = "move-node-to-workspace 62 --focus-follows-window"

[[on-window-detected]]
if.app-id = "com.todesktop.230313mzl4w4u92"
run = "move-node-to-workspace 62 --focus-follows-window"

[[on-window-detected]]
if.app-id = "com.hnc.Discord"
run = "move-node-to-workspace 4T --focus-follows-window"

[[on-window-detected]]
if.app-id = "com.tinyspeck.slackmacgap"
run = "move-node-to-workspace 4T --focus-follows-window"

[[on-window-detected]]
if.app-id = "com.facebook.archon"
run = "move-node-to-workspace 4T --focus-follows-window"
