#!/bin/bash

# This script will run if any of the files in this directory have changed
# {{ range (glob (joinPath .chezmoi.sourceDir (.chezmoi.sourceFile | dir) "*")) }}
#   {{ include . | sha256sum }}
# {{ end }}

if ! nix --version >/dev/null 2>&1; then
  curl -fsSL https://install.determinate.systems/nix | sh -s -- install || {
    echo "Nix not installed!"
    exit 0
  }
fi

sudo nix --extra-experimental-features "nix-command flakes" \
  run nix-darwin/nix-darwin-25.05#darwin-rebuild -- switch --flake .
