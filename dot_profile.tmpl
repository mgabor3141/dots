# Source sensitive env vars (API keys etc.)
set -a
[ -f "$HOME/.env" ] && . "$HOME/.env"
set +a

export EDITOR=nano
{{- if not .headless }}
export VISUAL="zed --wait"
{{- end }}

# export LESS="-FR -j3 --color=always"
# export PAGER="less -FR -j3 --color=always"

{{- if and (eq .chezmoi.os "linux") (not .headless) }}
export BROWSER=zen-browser
export SSH_AUTH_SOCK=$HOME/.bitwarden-ssh-agent.sock

export GTK_THEME=adw-gtk3-dark
export QT_AUTO_SCREEN_SCALE_FACTOR=1
export QT_ENABLE_HIGHDPI_SCALING=1
export ELECTRON_OZONE_PLATFORM_HINT="auto"
export QT_QPA_PLATFORM="wayland"
export QT_WAYLAND_DISABLE_WINDOWDECORATION="1"
export XDG_SESSION_TYPE="wayland"
export XDG_CURRENT_DESKTOP="niri"
export QT_QPA_PLATFORMTHEME="qt5ct"

# Gaming and compatibilty
export PROTON_ENABLE_WAYLAND=1
export PROTON_NO_WM_DECORATION=1

export npm_config_prefix="$HOME/.local"
{{- end }}

{{- if .headless }}
export npm_config_prefix="/mnt/user/appdata/node"
export PATH="$HOME/.local/bin:/mnt/user/appdata/chezmoi/bin:/mnt/user/appdata/node/bin:$PATH"
{{- end }}

{{- if eq .chezmoi.os "darwin" }}
export PATH="/opt/homebrew/bin:$PATH"
export XDG_CONFIG_HOME="$HOME/.config"

export SSH_AUTH_SOCK=$HOME/Library/Containers/com.bitwarden.desktop/Data/.bitwarden-ssh-agent.sock
{{- end }}

# Dev stuff
export NX_DAEMON="false"
export NX_TUI="false"
