# --- Minimal, invisible tmux config for tms ---

# True color support
set -g default-terminal "tmux-256color"

# Large scrollback
set -g history-limit 50000

# Mouse support
set -g mouse on

# No status bar — let the terminal handle tabs
set -g status off

# Don't auto-rename windows
set -g allow-rename off

# Vi mode for copy
setw -g mode-keys vi

# Fast escape (don't wait for escape sequences)
set -sg escape-time 10

# Focus events (needed for some editors)
set -g focus-events on

# Extended keys: pass through kitty keyboard protocol sequences
# (e.g. Shift+Enter) to applications that request them
set -s extended-keys on

# Terminal features for modern terminals (wezterm, kitty, etc.)
# extkeys: kitty keyboard protocol  │ sync: synchronized output (anti-flicker)
# RGB: true color                    │ hyperlinks: OSC 8 clickable links
# osc7: working directory reporting  │ cstyle/ccolour: cursor style & color
# usstyle: underline style & color   │ overline: overline attribute
# strikethrough: strikethrough attr  │ focus: focus in/out events
# clipboard: OSC 52 clipboard        │ mouse: extended mouse support
set -as terminal-features 'xterm*:extkeys:sync:RGB:hyperlinks:osc7:cstyle:ccolour:usstyle:overline:strikethrough:focus:clipboard:mouse'
set -as terminal-features 'wezterm:extkeys:sync:RGB:hyperlinks:osc7:cstyle:ccolour:usstyle:overline:strikethrough:focus:clipboard:mouse'

# Clipboard: passthrough OSC 52 so copy works through to terminal
set -g set-clipboard on
set -g allow-passthrough on

# Update environment on reattach (SSH agent, display, etc.)
set -g update-environment "SSH_AUTH_SOCK SSH_CONNECTION DISPLAY WAYLAND_DISPLAY"

# Session picker override — use tms
bind s run-shell -b "tmux display-popup -E -w 80% -h 60% 'tms --all'"
bind S run-shell -b "tmux display-popup -E -w 80% -h 60% 'tms'"

# Don't destroy session when last client detaches
set -g destroy-unattached off

# Renumber windows when one is closed
set -g renumber-windows on

# Start window/pane numbering at 1
set -g base-index 1
setw -g pane-base-index 1
